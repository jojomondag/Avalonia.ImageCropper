<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:mi="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="Avalonia.ImageCropper.Controls.CropArea">

    <UserControl.Styles>
        <!-- Crop circle border - clean Instagram style -->
        <Style Selector="Border.CropCircle">
            <Setter Property="BorderBrush" Value="White"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="BoxShadow" Value="0 0 0 1 #40000000"/>
        </Style>
    </UserControl.Styles>

    <Border Padding="4" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <Border Name="MainImageArea"
                BorderBrush="#333333"
                BorderThickness="1"
                CornerRadius="8"
                Background="#1a1a1a"
                ClipToBounds="True"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch">
            <Grid Name="ImageContainer" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" ClipToBounds="True">

                <!-- Background when no image -->
                <Grid Name="BackgroundPattern"
                      IsVisible="True"
                      Background="Transparent"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="8">
                        <mi:MaterialIcon Kind="ImagePlus" Width="48" Height="48" Foreground="#888888"/>
                        <TextBlock Text="Click to select an image"
                                   Foreground="#888888"
                                   FontSize="14"
                                   TextAlignment="Center"
                                   HorizontalAlignment="Center"/>
                    </StackPanel>
                </Grid>

                <!-- Image display - positioned via transform for pan/zoom/rotate -->
                <Image Name="MainImage"
                       Stretch="None"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       IsVisible="False"
                       Cursor="Hand"/>

                <!-- Crop overlay with dark surround and circle cutout -->
                <Grid Name="CropOverlay"
                      IsVisible="False"
                      Background="Transparent"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      IsHitTestVisible="False">

                    <!-- Dark overlay with circle cutout -->
                    <Path Name="OverlayCutout"
                          Fill="Black"
                          Opacity="0.6"
                          StrokeThickness="0"
                          IsHitTestVisible="False"/>

                    <!-- Clean circle border - centered, fixed position -->
                    <Border Name="CropCircle"
                            Classes="CropCircle"
                            Background="Transparent"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            IsHitTestVisible="False"/>
                </Grid>

                <!-- Interaction layer - captures all input -->
                <Border Name="InteractionLayer"
                        Background="Transparent"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Cursor="Hand"
                        IsVisible="False"/>
            </Grid>
        </Border>
    </Border>
</UserControl>
